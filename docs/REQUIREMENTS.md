# Dodak 시스템 요구사항 정의서

## 문서 정보

| 항목 | 내용 |
|------|------|
| 프로젝트명 | Dodak (AI 기반 감정 일기 & 심리 케어 플랫폼) |
| 문서 버전 | 1.0 |
| 작성일 | 2026-02-03 |
| 작성자 | 최대영 (PM / 기획·프론트엔드) |

---

## 1. 프로젝트 개요

### 1.1 프로젝트 목적
Dodak(도닥)은 사용자의 일상 감정을 기록하고 AI 기반으로 분석하여 심리적 건강을 지원하는 플랫폼입니다.
일기 작성을 통해 8가지 감정을 분석하고, 우울증 위험도를 예측하며, AI 챗봇을 통한 심리 상담과
감정 맞춤형 음악 추천 서비스를 제공합니다.

### 1.2 프로젝트 범위
- AI 기반 감정 분석 서비스 (8가지 감정 + 우울증 위험도)
- 일기 작성 및 관리 시스템
- AI 챗봇 심리 상담 서비스 (KoGPT2, KoBERT 기반)
- 감정 맞춤형 YouTube 음악 추천
- 병원/의사 정보 관리 및 예약 시스템
- 사용자 관리 시스템

### 1.3 용어 정의

| 용어 | 설명 |
|------|------|
| USER | 일반 사용자 (일기 작성, 감정 분석 이용) |
| DOCTOR | 의사 권한 (환자 정보 조회) |
| KoBERT | 한국어 BERT 모델 (감정 분류) |
| KoGPT2 | 한국어 GPT-2 모델 (대화 생성) |
| 8감정 | 기쁨, 희망, 중립, 분노, 슬픔, 불안, 피로, 후회 |

---

## 2. 시스템 구성

### 2.1 시스템 아키텍처

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              Client (Browser)                                    │
│                          사용자 웹 인터페이스                                      │
└───────────────────────────────────────┬─────────────────────────────────────────┘
                                        │ HTTP/HTTPS
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                         Spring Boot Web Server                                   │
│                              :8083 (Tomcat)                                      │
│  ┌────────────────────────────────────────────────────────────────────────────┐ │
│  │  Controller Layer                                                           │ │
│  │  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐       │ │
│  │  │ MemberRest   │ │ DiaryRest    │ │ AnalysisRest │ │ ArrangeRest  │       │ │
│  │  │ Controller   │ │ Controller   │ │ Controller   │ │ Controller   │       │ │
│  │  └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘       │ │
│  │  ┌──────────────┐ ┌──────────────┐                                          │ │
│  │  │ HospitalRest │ │ DoctorRest   │                                          │ │
│  │  │ Controller   │ │ Controller   │                                          │ │
│  │  └──────────────┘ └──────────────┘                                          │ │
│  ├────────────────────────────────────────────────────────────────────────────┤ │
│  │  Service Layer                                                              │ │
│  │  MemberService, DiaryService, AnalysisService, ArrangeService              │ │
│  │  HospitalService, DoctorService                                             │ │
│  ├────────────────────────────────────────────────────────────────────────────┤ │
│  │  Repository Layer (JPA + QueryDSL)                                          │ │
│  └────────────────────────────────────────────────────────────────────────────┘ │
└───────────────────────────────────────┬─────────────────────────────────────────┘
                    │                   │                   │
                    ▼                   ▼                   ▼
┌───────────────────────┐ ┌───────────────────────┐ ┌─────────────────────────────┐
│      MySQL 8.0        │ │   FastAPI AI Server   │ │      YouTube API            │
│       :3306           │ │        :8000          │ │   (Selenium Crawling)       │
│  ┌─────────────────┐  │ │  ┌─────────────────┐  │ │                             │
│  │ tb_member       │  │ │  │ /diary          │  │ │  감정 맞춤형 음악 검색       │
│  │ tb_diary        │  │ │  │ (감정 분석 API) │  │ │                             │
│  │ tb_analysis     │  │ │  ├─────────────────┤  │ └─────────────────────────────┘
│  │ tb_hospital     │  │ │  │ /chatbot/g      │  │
│  │ tb_doctor       │  │ │  │ (KoGPT2 챗봇)   │  │
│  │ tb_arrange      │  │ │  ├─────────────────┤  │
│  └─────────────────┘  │ │  │ /chatbot/b      │  │
│                       │ │  │ (KoBERT 챗봇)   │  │
│                       │ │  ├─────────────────┤  │
│                       │ │  │ /youtube/search │  │
│                       │ │  │ (음악 추천)     │  │
│                       │ │  └─────────────────┘  │
└───────────────────────┘ └───────────────────────┘
```

---

## 3. 기능 요구사항

### 3.1 회원 관리 (Member)

| ID | 기능명 | 설명 | 우선순위 |
|----|--------|------|----------|
| M-01 | 회원가입 | 사용자 정보 입력 및 계정 생성 | 필수 |
| M-02 | 로그인 | Spring Security 기반 인증 | 필수 |
| M-03 | 로그아웃 | 세션 종료 | 필수 |
| M-04 | 회원정보 수정 | 비밀번호, 연락처, 주소 등 수정 | 필수 |
| M-05 | 프로필 이미지 | 프로필 사진 업로드/변경 | 선택 |

### 3.2 일기 관리 (Diary)

| ID | 기능명 | 설명 | 우선순위 |
|----|--------|------|----------|
| D-01 | 일기 작성 | 제목, 내용, 첨부파일(최대 3개) 입력 | 필수 |
| D-02 | 일기 목록 조회 | 사용자별 일기 목록 표시 | 필수 |
| D-03 | 일기 상세 조회 | 일기 내용 및 감정 분석 결과 표시 | 필수 |
| D-04 | 일기 수정 | 작성된 일기 내용 수정 | 필수 |
| D-05 | 일기 삭제 | 일기 및 관련 분석 결과 삭제 | 필수 |

### 3.3 감정 분석 (Analysis)

| ID | 기능명 | 설명 | 우선순위 |
|----|--------|------|----------|
| A-01 | 8감정 분석 | 일기 내용에서 8가지 감정 비율 추출 | 필수 |
| A-02 | 우울증 위험도 | 우울증 관련 키워드 기반 위험도 계산 | 필수 |
| A-03 | 분석 결과 저장 | 분석 결과 DB 저장 | 필수 |
| A-04 | 감정 통계 | 기간별 감정 변화 추이 시각화 | 선택 |

### 3.4 AI 챗봇 (Chatbot)

| ID | 기능명 | 설명 | 우선순위 |
|----|--------|------|----------|
| C-01 | Simple 챗봇 | KoGPT2 기반 간단한 대화 | 필수 |
| C-02 | Complex 챗봇 | KoBERT 기반 심층 상담 | 필수 |
| C-03 | 대화 기록 | 챗봇 대화 내역 저장 | 선택 |

### 3.5 음악 추천 (YouTube)

| ID | 기능명 | 설명 | 우선순위 |
|----|--------|------|----------|
| Y-01 | 감정 기반 검색 | 분석된 감정에 맞는 음악 검색 | 필수 |
| Y-02 | 영상 정보 제공 | 제목, 썸네일, 채널, 조회수 표시 | 필수 |

### 3.6 병원/의사 관리

| ID | 기능명 | 설명 | 우선순위 |
|----|--------|------|----------|
| H-01 | 병원 정보 관리 | 병원 등록/수정/삭제 | 필수 |
| H-02 | 의사 정보 관리 | 의사 등록/수정/삭제 | 필수 |
| H-03 | 예약 관리 | 상담 예약 등록/조회/취소 | 필수 |

---

## 4. 비기능 요구사항

### 4.1 성능

| ID | 항목 | 요구사항 |
|----|------|----------|
| P-01 | 응답 시간 | 일반 API 응답 2초 이내 |
| P-02 | AI 분석 | 감정 분석 5초 이내 |
| P-03 | 동시 접속 | 최소 100명 동시 접속 지원 |

### 4.2 보안

| ID | 항목 | 요구사항 |
|----|------|----------|
| S-01 | 인증 | Spring Security 기반 세션 인증 |
| S-02 | 비밀번호 | BCrypt 암호화 저장 |
| S-03 | CORS | 허용된 Origin만 접근 가능 |
| S-04 | 개인정보 | 일기 내용 암호화 저장 (선택) |

### 4.3 가용성

| ID | 항목 | 요구사항 |
|----|------|----------|
| A-01 | 서비스 시간 | 24/7 운영 |
| A-02 | 데이터 백업 | 일 1회 자동 백업 |

---

## 5. 데이터베이스 설계

### 5.1 ERD 개요

```
┌──────────────────┐       ┌──────────────────┐       ┌──────────────────┐
│    tb_member     │       │     tb_diary     │       │   tb_analysis    │
├──────────────────┤       ├──────────────────┤       ├──────────────────┤
│ id (PK)          │──┐    │ diary_idx (PK)   │──────▶│ analysis_idx(PK) │
│ user_id (UK)     │  │    │ id (FK)          │◀──┐   │ diary_idx (FK)   │
│ password         │  └───▶│ diary_title      │   │   │ model_name       │
│ name             │       │ diary_content    │   │   │ anxiety_ratio    │
│ email            │       │ file1, file2,    │   │   │ sadness_ratio    │
│ phone            │       │ file3            │   │   │ joy_ratio        │
│ zip_code         │       │ created_at       │   │   │ anger_ratio      │
│ addr1, addr2     │       └──────────────────┘   │   │ regret_ratio     │
│ role             │                               │   │ hope_ratio       │
│ joined_at        │                               │   │ neutrality_ratio │
│ profile_image    │                               │   │ tiredness_ratio  │
└──────────────────┘                               │   │ depression_ratio │
                                                   │   │ created_at       │
┌──────────────────┐       ┌──────────────────┐   │   └──────────────────┘
│   tb_hospital    │       │    tb_doctor     │   │
├──────────────────┤       ├──────────────────┤   │
│ hosp_idx (PK)    │──────▶│ doc_idx (PK)     │   │
│ hosp_name        │       │ hosp_idx (FK)    │   │
│ zip_code         │       │ member_id (FK)   │───┘
│ addr1, addr2     │       │ specialty        │
│ tel              │       │ created_at       │
│ created_at       │       └──────────────────┘
└──────────────────┘
                           ┌──────────────────┐
                           │    tb_arrange    │
                           ├──────────────────┤
                           │ arr_idx (PK)     │
                           │ member_id (FK)   │
                           │ doc_idx (FK)     │
                           │ arr_date         │
                           │ arr_time         │
                           │ status           │
                           │ created_at       │
                           └──────────────────┘
```

---

## 6. 감정 분석 상세

### 6.1 8가지 감정 분류

| 감정 | 영문명 | 설명 | 관련 키워드 예시 |
|------|--------|------|------------------|
| 기쁨 | joy | 긍정적 감정, 행복 | 좋다, 행복, 기쁘다, 감사 |
| 희망 | hope | 미래에 대한 기대 | 할 수 있다, 희망, 기대 |
| 중립 | neutrality | 특별한 감정 없음 | - |
| 분노 | anger | 화남, 짜증 | 화나다, 짜증, 분노 |
| 슬픔 | sadness | 우울, 외로움 | 슬프다, 눈물, 우울 |
| 불안 | anxiety | 걱정, 두려움 | 불안, 걱정, 두렵다 |
| 피로 | tiredness | 지침, 무기력 | 피곤, 지치다, 녹초 |
| 후회 | regret | 아쉬움, 자책 | 후회, 아쉽다 |

### 6.2 우울증 위험도 키워드

| 위험 수준 | 키워드 예시 |
|-----------|-------------|
| 고위험 | 죽고 싶다, 사라지고 싶다, 의미 없다 |
| 중위험 | 절망, 포기하고 싶다 |

---

## 7. 외부 인터페이스

### 7.1 FastAPI AI 서버 API

| 엔드포인트 | 메서드 | 설명 | 요청 | 응답 |
|------------|--------|------|------|------|
| `/diary` | GET | 일기 감정 분석 | `?s=일기내용` | 8감정 비율 + 우울증 |
| `/chatbot/g` | GET | Simple 챗봇 | `?s=메시지` | answer |
| `/chatbot/b` | GET | Complex 챗봇 | `?s=메시지` | answer |
| `/youtube/search` | POST | 음악 검색 | `{keyword}` | 영상 목록 |

### 7.2 감정 분석 응답 예시

```json
{
  "joy": 25.5,
  "hope": 10.0,
  "neutrality": 15.0,
  "anger": 5.0,
  "sadness": 20.0,
  "anxiety": 10.0,
  "tiredness": 8.5,
  "regret": 6.0,
  "depression": 15.0
}
```

---

## 8. 개발 일정

| 단계 | 기간 | 주요 활동 |
|------|------|-----------|
| 분석/설계 | 1주 | 요구사항 분석, DB 설계, API 설계 |
| 개발 | 4주 | Backend, Frontend, AI 서버 개발 |
| 테스트 | 1주 | 통합 테스트, 사용성 테스트 |
| 배포 | 1주 | 서버 구축, 배포, 운영 가이드 작성 |

---

## 9. 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|-----------|--------|
| 1.0 | 2026-02-03 | 최초 작성 | 최대영 |
