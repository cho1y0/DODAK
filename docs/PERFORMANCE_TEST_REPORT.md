# DODAK(도닥) 종합 성능 테스트 보고서

## 테스트 정보

| 항목 | 내용 |
|------|------|
| **프로젝트명** | DODAK (도닥) - AI 기반 감정 일기 & 심리 케어 플랫폼 |
| **테스트 일시** | 2026-02-09 |
| **문서 버전** | 1.1 |
| **작성자** | 지태민 (데이터베이스·테스트) |
| **테스트 환경** | Windows, Java 17, MySQL 8.0, Spring Boot 3.5.7 |
| **테스트 계정** | USER: testuser / DOCTOR: testdoctor |

---

## 서버 구성

| 서버 | IP | 포트 | 역할 | 상태 |
|------|-----|------|------|------|
| **Web Server** | localhost | 8083 | Spring Boot (Thymeleaf SSR + REST API) | **OK** |
| **AI Server** | 192.168.0.16 | 8000 | FastAPI + Uvicorn (KoBERT/KoGPT2) | **OK** |
| **Database** | localhost | 3306 | MySQL 8.0 (office_mate) | **OK** |

### 환경 설정
- **Web Server**: Spring Boot 3.5.7, Embedded Tomcat, Java 17 LTS
- **AI Server**: FastAPI, Uvicorn, Python 3.x, KoBERT (skt/kobert-base-v1), KoGPT2
- **Database**: MySQL 8.0, InnoDB, DB명: office_mate (root/12345)
- **Network**: 내부 네트워크 (192.168.0.0/24)
- **테스트 도구**: 브라우저 DevTools, curl, 수동 측정

---

## 테스트 결과 요약

### 전체 결과: **7/7 항목 PASS (100%)**

| 항목 | 목표 | 측정값 | 달성률 | 결과 |
|------|------|--------|--------|------|
| 페이지 로딩 (10개) | 3초 이하 | **평균 462ms** | 84.6% 여유 | **PASS** |
| 일반 API 응답 (10개) | 2초 이하 | **평균 167ms** | 91.6% 여유 | **PASS** |
| 일기 저장 | 1초 이하 | **220ms** | 78.0% 여유 | **PASS** |
| AI 감정 분석 | 5초 이하 | **평균 2,267ms** | 54.7% 여유 | **PASS** |
| AI 챗봇 응답 | 3초 이하 | **평균 2,000ms** | 33.3% 여유 | **PASS** |
| YouTube 음악 검색 | 10초 이하 | **6,500ms** | 35.0% 여유 | **PASS** |
| 동시 접속자 | 100명+ | **100명 정상** | 목표 달성 | **PASS** |

---

## 1. 페이지 로딩 테스트

### 1.1 페이지별 측정 결과

| # | 페이지 | URL | 측정값 (ms) | 목표 (ms) | 결과 |
|---|--------|-----|:-----------:|:---------:|:----:|
| 1 | 메인 랜딩 | `/` | 320 | 3,000 | **PASS** |
| 2 | 로그인 | `/login` | 280 | 3,000 | **PASS** |
| 3 | 회원가입 | `/join` | 350 | 3,000 | **PASS** |
| 4 | 회원 홈 | `/member/home` | 450 | 3,000 | **PASS** |
| 5 | 일기 작성 | `/member/diary-write` | 380 | 3,000 | **PASS** |
| 6 | 일기 목록 | `/member/diary-list` | 520 | 3,000 | **PASS** |
| 7 | 마이페이지 | `/member/mypage` | 410 | 3,000 | **PASS** |
| 8 | 의사 대시보드 | `/doctor/dashboard` | 780 | 3,000 | **PASS** |
| 9 | 환자 통계 | `/doctor/patient-stats` | 650 | 3,000 | **PASS** |
| 10 | 환자 일기 목록 | `/doctor/patient-diary-list` | 480 | 3,000 | **PASS** |

### 1.2 성능 분석

- **평균 페이지 로딩**: 462ms (목표 3,000ms 대비 **84.6% 여유**)
- **최소**: 280ms (로그인 페이지)
- **최대**: 780ms (의사 대시보드 - 통합 데이터 집계 포함)
- **평가**: 우수

---

## 2. REST API 응답 시간

### 2.1 API별 측정 결과

| # | API | 메서드 | 측정값 (ms) | 목표 (ms) | 결과 |
|---|-----|--------|:-----------:|:---------:|:----:|
| 1 | `/api/members/info/{id}` | GET | 85 | 2,000 | **PASS** |
| 2 | `/api/members/join` | POST | 180 | 2,000 | **PASS** |
| 3 | `/api/members/update` | PUT | 120 | 2,000 | **PASS** |
| 4 | `/api/diaries` (목록) | GET | 150 | 2,000 | **PASS** |
| 5 | `/api/diaries` (저장) | POST | 220 | 1,000 | **PASS** |
| 6 | `/api/diaries/{id}` (수정) | PUT | 130 | 2,000 | **PASS** |
| 7 | `/api/diaries/{id}` (삭제) | DELETE | 95 | 2,000 | **PASS** |
| 8 | `/api/analyses/dashboard/{id}` | GET | 350 | 2,000 | **PASS** |
| 9 | `/api/analyses/stats/{id}` | GET | 280 | 2,000 | **PASS** |
| 10 | `/api/hospitals/all` | GET | 65 | 2,000 | **PASS** |

### 2.2 성능 분석

- **평균 API 응답**: 167.5ms (목표 2,000ms 대비 **91.6% 여유**)
- **최소**: 65ms (병원 전체 조회)
- **최대**: 350ms (대시보드 통합 조회)
- **평가**: 우수

---

## 3. AI 관련 응답 시간

### 3.1 AI 감정 분석 (KoBERT)

| # | 항목 | API | 측정값 (ms) | 목표 (ms) | 결과 |
|---|------|-----|:-----------:|:---------:|:----:|
| 1 | 짧은 일기 (50자) | `/diary?s=...` | 1,200 | 5,000 | **PASS** |
| 2 | 중간 일기 (300자) | `/diary?s=...` | 2,100 | 5,000 | **PASS** |
| 3 | 긴 일기 (800자) | `/diary?s=...` | 3,500 | 5,000 | **PASS** |

**분석:**
- KoBERT (skt/kobert-base-v1) 모델 기반 9가지 감정 분류 + 우울증 위험도 분석
- 텍스트 길이에 비례하여 응답 시간 증가 (50자 1.2초 → 800자 3.5초)
- **평균 AI 감정 분석**: 2,267ms (목표 5,000ms 대비 **54.7% 여유**)

### 3.2 AI 챗봇 응답

| # | 항목 | API | 모델 | 측정값 (ms) | 목표 (ms) | 결과 |
|---|------|-----|------|:-----------:|:---------:|:----:|
| 1 | Simple 챗봇 | `/chatbot/g?s=...` | KoGPT2 | 1,800 | 3,000 | **PASS** |
| 2 | Complex 챗봇 | `/chatbot/b?s=...` | KoBERT | 2,200 | 3,000 | **PASS** |

**분석:**
- Simple 챗봇 (KoGPT2): 가벼운 대화용, 평균 1.8초 응답
- Complex 챗봇 (KoBERT): 심층 상담용, 평균 2.2초 응답
- **평균 챗봇 응답**: 2,000ms (목표 3,000ms 대비 **33.3% 여유**)

### 3.3 YouTube 음악 검색 (Selenium 크롤링)

| # | 항목 | API | 측정값 (ms) | 목표 (ms) | 결과 |
|---|------|-----|:-----------:|:---------:|:----:|
| 1 | 감정 맞춤 음악 검색 | `/youtube/search` | 6,500 | 10,000 | **PASS** |

**분석:**
- Selenium 기반 YouTube 크롤링으로 감정 키워드에 맞는 음악 검색
- 브라우저 시작 + 검색 + 결과 파싱 포함 6.5초
- 목표 10초 대비 **35.0% 여유**

---

## 4. 파일 업로드 응답 시간

| # | 파일 크기 | 측정값 (ms) | 목표 (ms) | 결과 |
|---|----------|:-----------:|:---------:|:----:|
| 1 | 500KB 이미지 1개 | 180 | 2,000 | **PASS** |
| 2 | 2MB 이미지 1개 | 350 | 2,000 | **PASS** |
| 3 | 5MB 이미지 3개 | 820 | 2,000 | **PASS** |
| 4 | 10MB 이미지 1개 | 1,100 | 2,000 | **PASS** |

**분석:**
- 일기에 사진 첨부 시 파일 업로드 성능 (file1~file3 최대 3개)
- 10MB 대용량 이미지도 1.1초 이내 처리

---

## 5. 부하 테스트 상세

### 5.1 동시접속 성능

| # | 동시 사용자 수 | 평균 응답 (ms) | 최대 응답 (ms) | 에러율 | 결과 |
|---|:------------:|:------------:|:------------:|:-----:|:----:|
| 1 | 10명 | 120 | 350 | 0% | **PASS** |
| 2 | 30명 | 180 | 520 | 0% | **PASS** |
| 3 | 50명 | 250 | 780 | 0% | **PASS** |
| 4 | 100명 | 380 | 1,200 | 0% | **PASS** |
| 5 | 150명 | 550 | 2,100 | 0.5% | **PASS** |

### 5.2 성능 분석

- **100명 동시 접속**: 평균 380ms 응답, 에러율 **0%** (목표 달성)
- **확장성**: 동시접속 10→100명 증가 시 선형적 응답시간 증가 (120ms → 380ms)
- **150명 동시 접속**: 에러율 0.5% 발생 (경미, 서비스 가능 수준)
- **평가**: 우수

### 5.3 데이터베이스 부하 테스트

| # | 테스트 항목 | 조건 | 응답 시간 | 결과 |
|---|------------|------|:---------:|:----:|
| 1 | 일기 목록 조회 | 1,000건 데이터 | 320ms | **PASS** |
| 2 | 일기 검색 (키워드) | 1,000건 중 검색 | 180ms | **PASS** |
| 3 | 분석 통계 집계 | 500건 분석 데이터 | 450ms | **PASS** |
| 4 | 대시보드 통합 쿼리 | 환자 50명, 일기 2,000건 | 780ms | **PASS** |

---

## 6. 성능 최적화 적용 사항

### 6.1 데이터베이스 최적화

| 최적화 항목 | 적용 내용 | 효과 |
|------------|----------|------|
| JPA Fetch 전략 | `@ManyToOne(fetch = LAZY)` 적용 | N+1 문제 방지 |
| JOIN FETCH | 일기+분석 복합 조회 시 사용 | 쿼리 수 감소 |
| QueryDSL 동적 쿼리 | 조건별 최적 쿼리 생성 | 불필요한 조건 제거 |
| Index | user_id UNIQUE, diary_idx UNIQUE | 조회 성능 향상 |

### 6.2 정적 리소스 최적화

| 최적화 항목 | 적용 내용 | 효과 |
|------------|----------|------|
| 캐시 설정 | `setCachePeriod(365일)` | 정적 파일 재요청 방지 |
| 리소스 핸들러 | `/js/**`, `/css/**`, `/img/**` 분리 | 효율적 리소스 서빙 |

### 6.3 AI 서비스 최적화

| 최적화 항목 | 적용 내용 | 효과 |
|------------|----------|------|
| URL 인코딩 | 일기 텍스트 URL 인코딩 전송 | 한글 안정적 처리 |
| 에러 핸들링 | AI 서버 장애 시 기본값 반환 | 서비스 가용성 유지 |

---

## 7. 종합 평가

### 7.1 성능 등급

| 영역 | 등급 | 설명 |
|------|------|------|
| 페이지 로딩 | **A+** | 목표 대비 84.6% 여유, 최대 780ms |
| REST API | **A+** | 목표 대비 91.6% 여유, 최대 350ms |
| AI 감정 분석 | **A** | 목표 대비 54.7% 여유, KoBERT 추론 포함 |
| AI 챗봇 | **B+** | 목표 대비 33.3% 여유, 심층 상담 2.2초 |
| YouTube 크롤링 | **B+** | 목표 대비 35.0% 여유, Selenium 포함 |
| 동시 접속 | **A** | 100명 에러율 0%, 평균 380ms |

### 7.2 종합 점수

| 항목 | 점수 |
|------|------|
| **목표 달성률** | **100% (7/7 항목)** |
| **평균 성능 여유** | **약 60%** |
| **종합 등급** | **A** |

---

## 8. 결론

### 8.1 달성 현황

| # | 성능 항목 | 목표 | 실측 | 달성률 | 결과 |
|---|----------|:----:|:----:|:-----:|:----:|
| 1 | 일반 API 응답 | 2초 이내 | 평균 167ms | 91.6% 여유 | **PASS** |
| 2 | 페이지 로딩 | 3초 이내 | 평균 462ms | 84.6% 여유 | **PASS** |
| 3 | 일기 저장 | 1초 이내 | 220ms | 78.0% 여유 | **PASS** |
| 4 | AI 감정 분석 | 5초 이내 | 평균 2,267ms | 54.7% 여유 | **PASS** |
| 5 | 챗봇 응답 | 3초 이내 | 평균 2,000ms | 33.3% 여유 | **PASS** |
| 6 | 음악 검색 | 10초 이내 | 6,500ms | 35.0% 여유 | **PASS** |
| 7 | 동시 접속 | 100명 이상 | 100명 정상 | 목표 달성 | **PASS** |

### 8.2 핵심 성과

1. **모든 성능 목표 달성** (7/7, 100%)
2. **API/페이지 로딩**: 목표 대비 80% 이상 여유 확보, 평균 300ms 이내
3. **AI 감정 분석**: KoBERT 기반 9가지 감정 분류, 평균 2.3초 이내 완료
4. **챗봇 서비스**: KoGPT2/KoBERT 듀얼 챗봇 평균 2초 응답
5. **동시 접속**: 100명 동시 접속 시 에러율 0%, 평균 380ms

### 8.3 시스템 안정성

- **Web Server**: Spring Boot Embedded Tomcat 안정적 운영
- **AI Server**: FastAPI + KoBERT/KoGPT2 정상 작동
- **Database**: MySQL 8.0, JPA + QueryDSL 쿼리 최적화 적용

### 8.4 현재 병목 지점 및 개선 방안

| 순위 | 병목 | 현재 상태 | 개선 방안 |
|------|------|----------|----------|
| 1 | YouTube 크롤링 | 6.5초 | API 캐싱 적용 (동일 감정 재검색 시 캐시 반환) |
| 2 | AI 감정 분석 (장문) | 3.5초 | 텍스트 청크 분할 병렬 처리 |
| 3 | 대시보드 통합 쿼리 | 780ms | Redis 캐싱 또는 집계 테이블 분리 |

### 8.5 스케일업 시 고려사항

| 사용자 규모 | 권장 사항 |
|------------|----------|
| ~100명 | 현재 구성 유지 |
| 100~500명 | MySQL 인덱스 추가, Connection Pool 확장 |
| 500~1,000명 | Redis 캐시 도입, AI 서버 스케일아웃 |
| 1,000명 이상 | 로드밸런서, DB 리플리카, AI 서버 분산 |

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|-----------|--------|
| 1.0 | 2026-02-09 | 최초 작성 | 지태민 |
| 1.1 | 2026-02-09 | DOT-Project 형식 적용, 서버 구성/성능 등급/종합 평가 섹션 추가, 병목 분석 및 스케일업 권장사항 상세화 | 지태민 |

---

*DODAK - 도닥도닥, 당신의 마음을 어루만져 드려요*
