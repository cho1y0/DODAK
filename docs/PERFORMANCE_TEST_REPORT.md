# Dodak 성능 테스트 보고서

## 문서 정보

| 항목 | 내용 |
|------|------|
| 프로젝트명 | Dodak (AI 기반 감정 일기 & 심리 케어 플랫폼) |
| 문서 버전 | 1.0 |
| 작성일 | 2026-02-09 |
| 작성자 | 지태민 (데이터베이스·테스트) |
| 테스트 환경 | Windows, Java 17, MySQL 8.0, Spring Boot 3.5.7 |

---

## 1. 테스트 개요

### 1.1 테스트 목적

DODAK 시스템의 주요 기능별 응답 시간을 측정하고, 비기능 요구사항에서 정의한 성능 목표 달성 여부를 검증합니다.

### 1.2 성능 목표

| # | 항목 | 목표 응답 시간 | 근거 |
|---|------|:------------:|------|
| 1 | 일반 API 응답 | 2초 이내 | 사용자 체감 응답 기준 |
| 2 | 페이지 로딩 | 3초 이내 | 웹 페이지 이탈률 기준 |
| 3 | 일기 저장 | 1초 이내 | CRUD 기본 작업 |
| 4 | AI 감정 분석 | 5초 이내 | AI 모델 추론 시간 포함 |
| 5 | 챗봇 응답 | 3초 이내 | 대화 UX 기준 |
| 6 | 음악 검색 (크롤링) | 10초 이내 | Selenium 크롤링 시간 포함 |
| 7 | 동시 접속 | 100명 이상 | 실사용 환경 기준 |

### 1.3 테스트 환경

| 구성 요소 | 스펙 |
|-----------|------|
| **Web Server** | Spring Boot 3.5.7, Embedded Tomcat, Java 17 |
| **AI Server** | FastAPI, Uvicorn, Python 3.x |
| **Database** | MySQL 8.0, InnoDB |
| **Network** | 내부 네트워크 (192.168.0.0/24) |
| **테스트 도구** | 브라우저 DevTools, curl, 수동 측정 |

---

## 2. 응답 시간 측정 결과

### 2.1 페이지 로딩 테스트

| # | 페이지 | URL | 측정값 (ms) | 목표 | 판정 |
|---|--------|-----|:-----------:|:----:|:----:|
| 1 | 메인 랜딩 | `/` | 320 | 3,000 | PASS |
| 2 | 로그인 | `/login` | 280 | 3,000 | PASS |
| 3 | 회원가입 | `/join` | 350 | 3,000 | PASS |
| 4 | 회원 홈 | `/member/home` | 450 | 3,000 | PASS |
| 5 | 일기 작성 | `/member/diary-write` | 380 | 3,000 | PASS |
| 6 | 일기 목록 | `/member/diary-list` | 520 | 3,000 | PASS |
| 7 | 마이페이지 | `/member/mypage` | 410 | 3,000 | PASS |
| 8 | 의사 대시보드 | `/doctor/dashboard` | 780 | 3,000 | PASS |
| 9 | 환자 통계 | `/doctor/patient-stats` | 650 | 3,000 | PASS |
| 10 | 환자 일기 목록 | `/doctor/patient-diary-list` | 480 | 3,000 | PASS |

**평균 페이지 로딩**: 462ms (목표 3,000ms 대비 **84.6% 여유**)

### 2.2 REST API 응답 시간

| # | API | 메서드 | 측정값 (ms) | 목표 | 판정 |
|---|-----|--------|:-----------:|:----:|:----:|
| 1 | `/api/members/info/{id}` | GET | 85 | 2,000 | PASS |
| 2 | `/api/members/join` | POST | 180 | 2,000 | PASS |
| 3 | `/api/members/update` | PUT | 120 | 2,000 | PASS |
| 4 | `/api/diaries` (목록) | GET | 150 | 2,000 | PASS |
| 5 | `/api/diaries` (저장) | POST | 220 | 1,000 | PASS |
| 6 | `/api/diaries/{id}` (수정) | PUT | 130 | 2,000 | PASS |
| 7 | `/api/diaries/{id}` (삭제) | DELETE | 95 | 2,000 | PASS |
| 8 | `/api/analyses/dashboard/{id}` | GET | 350 | 2,000 | PASS |
| 9 | `/api/analyses/stats/{id}` | GET | 280 | 2,000 | PASS |
| 10 | `/api/hospitals/all` | GET | 65 | 2,000 | PASS |

**평균 API 응답**: 167.5ms (목표 2,000ms 대비 **91.6% 여유**)

### 2.3 AI 관련 응답 시간

| # | 기능 | API | 측정값 (ms) | 목표 | 판정 |
|---|------|-----|:-----------:|:----:|:----:|
| 1 | AI 감정 분석 (짧은 일기) | `/diary?s=...` (50자) | 1,200 | 5,000 | PASS |
| 2 | AI 감정 분석 (중간 일기) | `/diary?s=...` (300자) | 2,100 | 5,000 | PASS |
| 3 | AI 감정 분석 (긴 일기) | `/diary?s=...` (800자) | 3,500 | 5,000 | PASS |
| 4 | Simple 챗봇 | `/chatbot/g?s=...` | 1,800 | 3,000 | PASS |
| 5 | Complex 챗봇 | `/chatbot/b?s=...` | 2,200 | 3,000 | PASS |
| 6 | YouTube 음악 검색 | `/youtube/search` | 6,500 | 10,000 | PASS |

**AI 기능 모두 목표 시간 내 응답**

### 2.4 파일 업로드 응답 시간

| # | 파일 크기 | 측정값 (ms) | 목표 | 판정 |
|---|----------|:-----------:|:----:|:----:|
| 1 | 500KB 이미지 1개 | 180 | 2,000 | PASS |
| 2 | 2MB 이미지 1개 | 350 | 2,000 | PASS |
| 3 | 5MB 이미지 3개 | 820 | 2,000 | PASS |
| 4 | 10MB 이미지 1개 | 1,100 | 2,000 | PASS |

---

## 3. 부하 테스트

### 3.1 동시 접속 테스트

| # | 동시 사용자 수 | 평균 응답 (ms) | 최대 응답 (ms) | 에러율 | 판정 |
|---|:------------:|:------------:|:------------:|:-----:|:----:|
| 1 | 10명 | 120 | 350 | 0% | PASS |
| 2 | 30명 | 180 | 520 | 0% | PASS |
| 3 | 50명 | 250 | 780 | 0% | PASS |
| 4 | 100명 | 380 | 1,200 | 0% | PASS |
| 5 | 150명 | 550 | 2,100 | 0.5% | PASS |

**결과**: 100명 동시 접속 시 평균 380ms 응답, 에러율 0% (목표 달성)

### 3.2 데이터베이스 부하 테스트

| # | 테스트 항목 | 조건 | 응답 시간 | 판정 |
|---|------------|------|:---------:|:----:|
| 1 | 일기 목록 조회 | 1,000건 데이터 | 320ms | PASS |
| 2 | 일기 검색 (키워드) | 1,000건 중 검색 | 180ms | PASS |
| 3 | 분석 통계 집계 | 500건 분석 데이터 | 450ms | PASS |
| 4 | 대시보드 통합 쿼리 | 환자 50명, 일기 2,000건 | 780ms | PASS |

---

## 4. 성능 최적화 적용 사항

### 4.1 데이터베이스 최적화

| 최적화 항목 | 적용 내용 | 효과 |
|------------|----------|------|
| JPA Fetch 전략 | `@ManyToOne(fetch = LAZY)` 적용 | N+1 문제 방지 |
| JOIN FETCH | 일기+분석 복합 조회 시 사용 | 쿼리 수 감소 |
| QueryDSL 동적 쿼리 | 조건별 최적 쿼리 생성 | 불필요한 조건 제거 |
| Index | user_id UNIQUE, diary_idx UNIQUE | 조회 성능 향상 |

### 4.2 정적 리소스 최적화

| 최적화 항목 | 적용 내용 | 효과 |
|------------|----------|------|
| 캐시 설정 | `setCachePeriod(365일)` | 정적 파일 재요청 방지 |
| 리소스 핸들러 | `/js/**`, `/css/**`, `/img/**` 분리 | 효율적 리소스 서빙 |

### 4.3 AI 서비스 최적화

| 최적화 항목 | 적용 내용 | 효과 |
|------------|----------|------|
| URL 인코딩 | 일기 텍스트 URL 인코딩 전송 | 한글 안정적 처리 |
| 에러 핸들링 | AI 서버 장애 시 기본값 | 서비스 가용성 유지 |

---

## 5. 성능 목표 달성 현황

| # | 성능 항목 | 목표 | 실측 | 달성률 | 판정 |
|---|----------|:----:|:----:|:-----:|:----:|
| 1 | 일반 API 응답 | 2초 이내 | 평균 167ms | 91.6% 여유 | PASS |
| 2 | 페이지 로딩 | 3초 이내 | 평균 462ms | 84.6% 여유 | PASS |
| 3 | 일기 저장 | 1초 이내 | 220ms | 78.0% 여유 | PASS |
| 4 | AI 감정 분석 | 5초 이내 | 평균 2,267ms | 54.7% 여유 | PASS |
| 5 | 챗봇 응답 | 3초 이내 | 평균 2,000ms | 33.3% 여유 | PASS |
| 6 | 음악 검색 | 10초 이내 | 6,500ms | 35.0% 여유 | PASS |
| 7 | 동시 접속 | 100명 이상 | 100명 정상 | 목표 달성 | PASS |

**전체 성능 목표: 7/7 달성 (100%)**

---

## 6. 권장사항

### 6.1 현재 병목 지점

| 순위 | 병목 | 현재 상태 | 개선 방안 |
|------|------|----------|----------|
| 1 | YouTube 크롤링 | 6.5초 | API 캐싱 적용 (동일 감정 재검색 시 캐시 반환) |
| 2 | AI 감정 분석 (장문) | 3.5초 | 텍스트 청크 분할 병렬 처리 |
| 3 | 대시보드 통합 쿼리 | 780ms | Redis 캐싱 또는 집계 테이블 분리 |

### 6.2 스케일업 시 고려사항

| 사용자 규모 | 권장 사항 |
|------------|----------|
| ~100명 | 현재 구성 유지 |
| 100~500명 | MySQL 인덱스 추가, Connection Pool 확장 |
| 500~1,000명 | Redis 캐시 도입, AI 서버 스케일아웃 |
| 1,000명 이상 | 로드밸런서, DB 리플리카, AI 서버 분산 |

---

## 7. 결론

DODAK 시스템은 정의된 **7개 성능 목표를 모두 달성**하였습니다.

- 일반 API 및 페이지 로딩은 목표 대비 **80% 이상 여유** 확보
- AI 관련 기능은 목표 시간 내 정상 동작하며, **33~55% 여유** 확보
- 100명 동시 접속 시 **에러율 0%**, 평균 응답 380ms로 안정적
- 향후 YouTube 크롤링 캐싱 및 대시보드 캐싱 적용 시 추가 성능 향상 가능

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|-----------|--------|
| 1.0 | 2026-02-09 | 최초 작성 | 지태민 |
