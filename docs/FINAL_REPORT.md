# DODAK(도닥) 최종 결과 보고서

## 문서 정보

| 항목 | 내용 |
|------|------|
| 프로젝트명 | DODAK (도닥) - AI 기반 감정 일기 & 심리 케어 플랫폼 |
| 문서 유형 | 최종 결과 보고서 |
| 문서 버전 | 1.2 |
| 작성일 | 2026-02-09 |
| 개발 기간 | 2026년 1월 ~ 2026년 2월 (약 4주) |
| 개발 인원 | 6명 (최대영 PM/기획-프론트엔드, 박제연 기획-백엔드, 주현준 프론트엔드, 지태민 데이터베이스-테스트, 서유나 문서작성, 조민솔 문서작성) |

---

## 1. 프로젝트 개요

### 1.1 프로젝트 소개

**DODAK(도닥)**은 "도닥도닥, 당신의 마음을 어루만져 드려요"라는 슬로건 아래, 사용자의 일상 감정을 일기 형태로 기록하고 AI 기반으로 9가지 감정을 분석하여 심리적 건강을 지원하는 웹 서비스입니다. 마스코트 '도닥이'(스카프를 두른 다람쥐 캐릭터)가 사용자의 감정 여정을 함께합니다.

### 1.2 프로젝트 배경

현대인의 정신 건강 문제가 심각해지고 있습니다.

| 문제 | 설명 |
|------|------|
| 감정 방치 | 바쁜 일상 속 자신의 감정을 인식하지 못하고 방치하는 현대인 증가 |
| 심리 질환 증가 | 우울증, 불안장애 등 정신 건강 문제 지속적 증가 추세 |
| 상담 접근성 부족 | 높은 심리 상담 비용과 시간적 제약으로 인한 낮은 상담 접근성 |

**DODAK의 해결 방안**: "누구나 쉽게 자신의 감정을 기록하고, AI의 도움으로 마음 건강을 관리할 수 있는 서비스"

- 일기를 통한 자기 감정 인식 -> 감정 패턴 파악
- AI 감정 분석으로 객관적 심리 현황 파악 -> 우울증 조기 발견
- 24시간 접근 가능한 챗봇 상담 -> 시간/비용 장벽 해소

### 1.3 프로젝트 목적

- 일기 작성을 통한 자기 감정 인식 및 기록 습관 형성
- AI 기반 9가지 감정 자동 분류 및 우울증 위험도 예측
- AI 챗봇(KoGPT2, KoBERT)을 활용한 24시간 심리 상담 지원
- 감정 맞춤형 YouTube 음악 추천으로 치유 콘텐츠 제공
- 전문 의사 연결 및 환자 배정/모니터링 시스템 운영

### 1.4 프로젝트 범위

| 구분 | 내용 |
|------|------|
| 대상 사용자 | 일반 사용자(USER), 의사(DOCTOR) |
| 핵심 기능 | 감정 일기, AI 감정 분석, 챗봇 상담, 음악 추천, 의사 대시보드, 환자 배정 |
| 개발 기간 | 2026년 1월 ~ 2026년 2월 (약 4주) |

### 1.5 서비스 구성

| 서비스 | 설명 | URL |
|--------|------|-----|
| **DODAK Web** | 메인 감정 일기 & 심리 케어 플랫폼 (Spring Boot) | http://localhost:8083 |
| **AI Server** | 감정 분석 + 챗봇 + 음악 검색 API (FastAPI) | http://192.168.0.16:8000 |

---

## 2. 시스템 아키텍처

### 2.1 전체 시스템 구성

DODAK은 3-Tier 아키텍처로 구성되며, Spring Boot 웹 서버, FastAPI AI 서버, MySQL 데이터베이스가 유기적으로 연동됩니다.

```
+-------------------------------------------------------------+
|                    Client (Browser)                           |
|                  사용자 웹 인터페이스                           |
+--------------------------+----------------------------------+
                           | HTTP/HTTPS
                           v
+-------------------------------------------------------------+
|              Spring Boot Web Server (:8083)                    |
|  +-------------------------------------------------------+  |
|  |  Controller -> Service -> Repository -> Entity (JPA)   |  |
|  |  + Spring Security (인증/인가)                          |  |
|  |  + Thymeleaf (SSR 뷰 템플릿)                           |  |
|  +-------------------------------------------------------+  |
+--------+-----------------+-----------------+----------------+
         |                 |                 |
         v                 v                 v
+----------------+ +----------------+ +--------------------+
|  MySQL 8.0     | | FastAPI AI     | |   YouTube API      |
|    :3306       | |   :8000        | | (Selenium 크롤링)   |
| 6개 테이블      | | KoBERT/KoGPT2 | | 감정 맞춤 음악 검색  |
+----------------+ +----------------+ +--------------------+
```

### 2.2 서비스 흐름도

사용자가 일기를 작성하면 AI 분석이 자동으로 수행되고, 결과에 따라 음악 추천 또는 전문 상담으로 연결됩니다.

```
+-----------+     +-----------+     +-----------+     +-----------+
| 일기 작성  | --> | AI 분석    | --> | 결과 확인  | --> | 음악 추천  |
+-----------+     +-----------+     +-----------+     +-----------+
                                         |
                                         v
                                   +-----------+     +-----------+
                                   | 챗봇 상담  | --> | 전문 상담  |
                                   +-----------+     +-----------+
```

### 2.3 레이어 아키텍처

| 레이어 | 역할 | 기술 |
|--------|------|------|
| Presentation | 사용자 인터페이스 | Thymeleaf + HTML5/CSS3/JavaScript |
| Controller | 요청/응답 처리 | Spring MVC REST Controller |
| Service | 비즈니스 로직 | Spring Service Layer |
| Repository | 데이터 접근 | JPA Repository + QueryDSL |
| Entity | 데이터 모델 | JPA Entity (6개 테이블) |

---

## 3. 기술 스택

### 3.1 Backend (Spring Boot)

| 기술 | 버전 | 용도 |
|------|------|------|
| Spring Boot | 3.5.7 | 메인 웹 애플리케이션 프레임워크 |
| Spring Security | 6.x | 인증/인가 (세션 기반, BCrypt 암호화) |
| Spring Data JPA | 3.x | ORM 및 데이터 접근 계층 |
| Thymeleaf | 3.x | 서버사이드 렌더링 템플릿 엔진 |
| QueryDSL | 5.0.0 | 타입 세이프 동적 쿼리 빌더 |
| MySQL Connector/J | 8.x | JDBC 드라이버 |
| Lombok | latest | 보일러플레이트 코드 자동 생성 |
| Java | 17 LTS | 프로그래밍 언어 |
| Maven | 3.x | 빌드 및 의존성 관리 |

### 3.2 AI Server (FastAPI)

| 기술 | 용도 |
|------|------|
| FastAPI + Uvicorn | 비동기 REST API 서버 |
| KoBERT (skt/kobert-base-v1) | 감정 분류 모델 (Complex 챗봇) |
| KoGPT2 | 대화 생성 모델 (Simple 챗봇) |
| Selenium + BeautifulSoup4 | YouTube 음악 크롤링 |
| Pydantic | 데이터 검증 및 직렬화 |

### 3.3 Frontend

| 기술 | 용도 |
|------|------|
| HTML5 / CSS3 | 마크업 및 스타일링 |
| JavaScript (ES6+) | 동적 인터랙션, AJAX 통신 |
| Thymeleaf | Spring Boot 통합 SSR |

### 3.4 Database

| 항목 | 내용 |
|------|------|
| DBMS | MySQL 8.0 |
| DB명 | office_mate |
| 테이블 수 | 6개 (tb_member, tb_diary, tb_analysis, tb_hospital, tb_doctor, tb_arrange) |
| ORM | JPA + QueryDSL |
| 인증정보 | root / 12345 |

### 3.5 프로젝트 규모 통계

| 지표 | 수치 | 설명 |
|------|:----:|------|
| Java 클래스 | 40+ | Controller, Service, Repository, Entity, Config 등 |
| AI API | 5개 | 상태확인, 감정분석, Simple 챗봇, Complex 챗봇, 음악검색 |
| DB 테이블 | 6개 | member, diary, analysis, hospital, doctor, arrange |
| 감정 분류 | 9가지 | 불안, 슬픔, 기쁨, 분노, 후회, 희망, 중립, 피로, 우울 + 우울증 위험도 |
| REST 엔드포인트 | 30+ | 회원, 일기, 분석, 병원, 의사, 배정 API |
| 화면 수 | 15개 | 공개 3 + 회원 4 + 의사 5 + 병원 2 + 공통 1 |
| 테스트 케이스 | 177개 | 기능 테스트 + 비기능 테스트 |
| 통합 테스트 | 40개 | E2E, DB, AI, Security, 동시성, 회귀 |

---

## 4. 주요 기능 구현

### 4.1 기능 요약

| # | 기능 | 설명 | AI 활용 |
|---|------|------|---------|
| 1 | **감정 일기** | 일상의 감정을 자유롭게 기록하고, 사진과 함께 추억을 남길 수 있음 | - |
| 2 | **AI 감정 분석** | 작성한 일기를 AI가 분석하여 9가지 감정 비율과 우울증 위험도를 제공 | KoBERT |
| 3 | **AI 챗봇 상담** | KoGPT2(가벼운 대화), KoBERT(심층 상담) 기반 24시간 심리 상담 지원 | KoGPT2 + KoBERT |
| 4 | **음악 추천** | 분석된 감정에 맞는 YouTube 음악을 자동 추천하여 마음 치유 | Selenium |
| 5 | **의사 대시보드** | 담당 환자 종합 현황, 감정 분포, 중증 환자 모니터링 | - |
| 6 | **환자 통계** | 개별 환자의 월별 감정 추이, 우울/행복 지수 분석 | - |
| 7 | **환자 배정** | 의사-환자 배정 관리, 미배정 환자 배정 기능 | - |
| 8 | **병원 관리** | 병원 등록/검색, 의사 소속 병원 연동 | - |

### 4.2 구현 상세

#### 4.2.1 공개 화면 (비로그인)

**메인 페이지 (Index)**

![메인 페이지](../screenshot/public_01_index.png)

- "DODAK: 일상을 '도닥'여주는 마음 기록 웹" 타이틀
- 시작하기 / 마스코트 소개 / 프로젝트 설명 탭 네비게이션
- 회원가입 및 로그인 CTA 버튼
- 다람쥐 마스코트 '도닥이' 캐릭터 배치
- 따뜻한 베이지 톤의 격자무늬 배경 디자인

**로그인 페이지**

![로그인 페이지](../screenshot/public_02_login.png)

- Spring Security 기반 세션 인증 로그인
- 도닥이 마스코트 이미지 + "도닥이가 당신의 이야기를 기다립니다" 안내 문구
- BCrypt 비밀번호 암호화, CustomAuthSuccessHandler 역할별 리다이렉트

**회원가입 페이지**

![회원가입 페이지](../screenshot/public_03_signup.png)

- 기본 정보(프로필, 역할, 아이디, 이름, 비밀번호), 연락 정보, 주소 정보, 약관 동의
- 아이디/이메일 중복 체크, 비밀번호 규칙(8~20자, 영문+숫자+특수문자)

#### 4.2.2 일반 회원(USER) 화면

**회원 메인 페이지 (Home)**

![회원 메인](../screenshot/member_01_home.png)

- 마스코트 소개 / 프로젝트 설명 탭
- 도닥이 캐릭터 소개 (스카프를 두른 다람쥐)

**일기 작성 페이지**

![일기 작성](../screenshot/member_02_diary_write.png)

- 9가지 감정 칩: 분노(빨강), 불안(주황), 슬픔(파랑), 기쁨(초록), 후회(보라), 희망(하늘), 중립(회색), 피로(검정), 우울(남색)
- 제목(30자), 내용(1000자), 첨부파일(최대 3개, 10MB)
- 저장 시 FastAPI 감정 분석 API 자동 호출
- YouTube 음악 추천 연동

**일기 목록 페이지**

![일기 목록](../screenshot/member_03_diary_list.png)

- 날짜/키워드 검색 필터, 감정별 색상 배지, 페이지네이션
- 클릭 시 상세 모달 (AI 분석 결과 포함)

**마이페이지**

![회원 마이페이지](../screenshot/member_04_mypage.png)

- 프로필 이미지, 역할(읽기전용), 아이디, 이름, 비밀번호, 연락처, 주소 수정

#### 4.2.3 의사(DOCTOR) 화면

**의사 대시보드**

![의사 대시보드](../screenshot/doctor_02_dashboard.png)

- 상단 요약 카드 4개: 배정 환자(파랑), 중증 환자(빨강), 이번 달 일기(주황), 평균 행복지수(노랑)
- 전체 환자 감정 분포 파이 차트
- 최근 7일 일기 작성 추이 라인 차트
- 중증 환자 현황 테이블
- 최근 일기 작성 현황 리스트
- 월별 감정 추이 막대 차트

**환자 통계 페이지**

![환자 통계](../screenshot/doctor_03_patient_stats.png)

- 환자 선택 드롭다운, 연/월 선택
- 종합 우울지수 / 행복지수 (보통/주의/위험 등급)
- 가장 부정적이었던 날 TOP 3
- 종합 마음 추이 차트, 행복/우울 지수 비교 차트

**환자 일기 목록 페이지**

![환자 일기 목록](../screenshot/doctor_04_patient_diary_list.png)

- 담당 환자의 일기 기록 열람, 날짜/키워드 검색, 상세 모달

**의사 마이페이지**

![의사 마이페이지](../screenshot/doctor_05_mypage.png)

- 기본 회원정보 + 의사 정보(소속 병원, 전문 분야)
- 환자 배정 탭: 배정/미배정 환자 목록, 배정하기 기능

---

## 5. 데이터베이스 설계

### 5.1 ERD (Entity-Relationship Diagram)

```
+------------------+       +------------------+       +------------------+
|    tb_member     |       |     tb_diary     |       |   tb_analysis    |
+------------------+       +------------------+       +------------------+
| id (PK)          |--+    | diary_idx (PK)   |------>| analysis_idx(PK) |
| user_id (UK)     |  |    | id (FK)          |       | diary_idx (FK)   |
| password (BCrypt)|  +--->| diary_title      |       | model_name       |
| name             |       | diary_content    |       | 9개 감정 비율     |
| email            |       | file1~3          |       | depression_ratio |
| phone            |       | created_at       |       | created_at       |
| zip_code         |       +------------------+       +------------------+
| addr1, addr2     |
| role (USER/      |
|  DOCTOR)         |
| profile_image    |
| joined_at        |
+------------------+

+------------------+       +------------------+       +------------------+
|   tb_hospital    |       |    tb_doctor     |       |    tb_arrange    |
+------------------+       +------------------+       +------------------+
| hosp_idx (PK)    |------>| doc_idx (PK)     |<------| arr_idx (PK)     |
| hosp_name        |       | hosp_idx (FK)    |       | member_id (FK)   |
| zip_code         |       | member_id (FK)   |       | doc_idx (FK)     |
| addr1, addr2     |       | specialty        |       | arr_date/time    |
| tel              |       | created_at       |       | status           |
| created_at       |       +------------------+       | created_at       |
+------------------+                                   +------------------+
```

### 5.2 테이블 목록 (6개)

| 테이블 | 설명 | 주요 컬럼 |
|--------|------|----------|
| **tb_member** | 회원 | user_id, password, name, email, role, profile_image |
| **tb_diary** | 일기 | id(FK), diary_title, diary_content, file1~3, created_at |
| **tb_analysis** | 감정 분석 | diary_idx(FK), 9개 감정 비율, depression_ratio, model_name |
| **tb_hospital** | 병원 | hosp_name, zip_code, addr1, addr2, tel |
| **tb_doctor** | 의사 | hosp_idx(FK), member_id(FK), specialty |
| **tb_arrange** | 환자 배정 | member_id(FK), doc_idx(FK), arr_date, arr_time, status |

### 5.3 감정 분석 결과 저장 구조 (tb_analysis)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| anxiety_ratio | DECIMAL(4,1) | 불안 비율 (0.0~100.0) |
| sadness_ratio | DECIMAL(4,1) | 슬픔 비율 |
| joy_ratio | DECIMAL(4,1) | 기쁨 비율 |
| anger_ratio | DECIMAL(4,1) | 분노 비율 |
| regret_ratio | DECIMAL(4,1) | 후회 비율 |
| hope_ratio | DECIMAL(4,1) | 희망 비율 |
| neutrality_ratio | DECIMAL(4,1) | 중립 비율 |
| tiredness_ratio | DECIMAL(4,1) | 피로 비율 |
| depression_ratio | DECIMAL(4,1) | 우울증 위험도 |

---

## 6. AI 감정 분석 시스템

### 6.1 9가지 감정 분류 체계

| 감정 | 영문 | 키워드 예시 | UI 색상 |
|------|------|-------------|---------|
| 불안 | anxiety | 불안, 걱정, 두렵다 | 주황 (#FF8C00) |
| 슬픔 | sadness | 슬프다, 눈물, 우울 | 파랑 (#4169E1) |
| 기쁨 | joy | 좋다, 행복, 기쁘다, 감사 | 초록 (#2E8B57) |
| 분노 | anger | 화나다, 짜증, 분노 | 빨강 (#FF4444) |
| 후회 | regret | 후회, 아쉽다 | 보라 (#8B008B) |
| 희망 | hope | 할 수 있다, 희망, 기대 | 하늘 (#87CEEB) |
| 중립 | neutrality | (특별한 감정 없음) | 회색 (#808080) |
| 피로 | tiredness | 피곤, 지치다, 녹초 | 검정 (#333333) |
| 우울 | depression | 우울, 의미 없다 | 남색 (#191970) |

### 6.2 우울증 위험도 평가

| 위험 수준 | 키워드 예시 | 시스템 대응 |
|-----------|-------------|-------------|
| 고위험 | 죽고 싶다, 사라지고 싶다, 의미 없다 | 전문 상담 연결 안내 강조 |
| 중위험 | 절망, 포기하고 싶다 | 전문 상담 권유 메시지 |
| 정상 | (해당 키워드 없음) | 일반 감정 분석 결과 표시 |

### 6.3 분석 프로세스

```
일기 텍스트 입력
     |
     v
URL 디코딩 -> Regex 문장 분리 -> 문장별 감정 키워드 분석
     |                                    |
     v                                    v
긍정/부정/중립 1차 분류          우울증 키워드 검출
     |                                    |
     v                                    v
9가지 세부 감정 비율 계산       우울증 위험도 계산
     |                                    |
     +----------------+------------------+
                       v
                 JSON 결과 반환
```

---

## 7. API 설계

### 7.1 Spring Boot REST API (30+ 엔드포인트)

| 분류 | 엔드포인트 | 메서드 | 기능 |
|------|-----------|--------|------|
| **인증** | `/loginProc` | POST | Spring Security 로그인 처리 |
| | `/join` | GET | 회원가입 페이지 |
| **회원** | `/api/members/info/{id}` | GET | 회원 정보 조회 |
| | `/api/members/join` | POST | 회원가입 처리 |
| | `/api/members/update` | PUT | 회원 정보 수정 |
| | `/api/members/checkId` | GET | 아이디 중복 체크 |
| | `/api/members/checkEmail` | GET | 이메일 중복 체크 |
| **일기** | `/api/diaries` | GET | 일기 목록 조회 |
| | `/api/diaries` | POST | 일기 작성 |
| | `/api/diaries/{diaryIdx}` | GET | 일기 상세 조회 |
| | `/api/diaries/{diaryIdx}` | PUT | 일기 수정 |
| | `/api/diaries/{diaryIdx}` | DELETE | 일기 삭제 |
| | `/api/diaries/search` | GET | 일기 검색 (날짜/키워드) |
| | `/api/diaries/patient/{memberId}` | GET | 환자 일기 목록 (의사용) |
| **분석** | `/api/analyses/{diaryIdx}` | GET | 분석 결과 조회 |
| | `/api/analyses` | POST | 분석 결과 저장 |
| | `/api/analyses/dashboard/{doctId}` | GET | 의사 대시보드 데이터 |
| | `/api/analyses/stats/{memberId}` | GET | 환자 통계 데이터 |
| **병원** | `/api/hospitals` | POST | 병원 등록 |
| | `/api/hospitals/all` | GET | 전체 병원 목록 |
| | `/api/hospitals/search` | GET | 병원 검색 |
| **의사** | `/api/doctors/info` | GET | 의사 정보 조회 |
| | `/api/doctors` | POST | 의사 정보 등록 |
| **배정** | `/api/arranges` | POST | 환자 배정 |
| | `/api/arranges/{docIdx}` | GET | 배정 환자 목록 |
| | `/api/arranges/unassigned` | GET | 미배정 환자 목록 |

### 7.2 FastAPI AI Server API

| 엔드포인트 | 메서드 | 기능 | 모델 | 응답 시간 목표 |
|-----------|--------|------|------|:-------------:|
| `/diary?s={텍스트}` | GET | 일기 감정 분석 (9감정 + 우울증) | KoBERT | 5초 이내 |
| `/chatbot/g?s={메시지}` | GET | Simple 챗봇 (가벼운 대화) | KoGPT2 | 3초 이내 |
| `/chatbot/b?s={메시지}` | GET | Complex 챗봇 (심층 상담) | KoBERT | 3초 이내 |
| `/youtube/search` | POST | 감정 맞춤 음악 검색 | Selenium | 10초 이내 |
| `/health` | GET | AI 서버 상태 확인 | - | 1초 이내 |

### 7.3 감정-음악 매핑

| 감정 | YouTube 검색 쿼리 |
|------|-------------------|
| 분노 | 분노 가라앉히는 음악 |
| 불안 | 불안할때 듣는 노래 |
| 슬픔 | 슬플때 듣는 노래 |
| 기쁨 | 기쁠때 듣는 노래 |
| 후회 | 후회할때 듣는노래 |
| 희망 | 희망찬 브금 |
| 중립 | 머릿속이 복잡할때 듣는 노래 |
| 피로 | 지치고 힘들때 듣는 노래 |
| 우울 | 우울함을 달래줄 노래 |

---

## 8. 보안 설계

### 8.1 인증/인가

| 항목 | 구현 내용 |
|------|----------|
| **인증 방식** | Spring Security 세션 기반 인증 |
| **비밀번호** | BCrypt 단방향 암호화 저장 |
| **권한 관리** | 역할 기반(RBAC): USER, DOCTOR |
| **세션 관리** | CustomAuthSuccessHandler 권한별 리다이렉트 |
| **CORS** | 허용된 내부 네트워크 Origin만 접근 가능 |

### 8.2 권한별 접근 제어

| 기능 | USER | DOCTOR |
|------|:----:|:------:|
| 일기 작성/조회 | O | O |
| 감정 분석 | O | O |
| 챗봇 상담 | O | O |
| 음악 추천 | O | O |
| 환자 정보 조회 | - | O |
| 대시보드 | - | O |
| 환자 통계 | - | O |
| 환자 배정 | - | O |

---

## 9. 인프라 구성

### 9.1 서버 환경

| 구분 | 호스트 | 포트 | 역할 |
|------|--------|------|------|
| Web Server | localhost | 8083 | Spring Boot (Embedded Tomcat) |
| AI Server | 192.168.0.16 | 8000 | FastAPI (Uvicorn) |
| Database | localhost | 3306 | MySQL 8.0 (office_mate) |

### 9.2 네트워크 구성

- 내부 네트워크(192.168.0.0/24) 기반 운영
- Web Server <-> AI Server 간 REST API 통신
- Web Server <-> MySQL 간 JDBC 연결
- CORS 정책으로 허용된 Origin만 접근 가능

---

## 10. 성능 목표 달성 현황

### 10.1 성능

| # | 항목 | 목표 | 실측 | 달성률 | 판정 |
|---|------|:----:|:----:|:-----:|:----:|
| 1 | 일반 API 응답 | 2초 이내 | 평균 167ms | 91.6% 여유 | PASS |
| 2 | 페이지 로딩 | 3초 이내 | 평균 462ms | 84.6% 여유 | PASS |
| 3 | 일기 저장 | 1초 이내 | 220ms | 78.0% 여유 | PASS |
| 4 | AI 감정 분석 | 5초 이내 | 평균 2,267ms | 54.7% 여유 | PASS |
| 5 | 챗봇 응답 | 3초 이내 | 평균 2,000ms | 33.3% 여유 | PASS |
| 6 | 음악 검색 | 10초 이내 | 6,500ms | 35.0% 여유 | PASS |
| 7 | 동시 접속 | 100명 이상 | 100명 정상 | 목표 달성 | PASS |

**전체 성능 목표: 7/7 달성 (100%)**

### 10.2 보안

| 항목 | 달성 |
|------|:----:|
| Spring Security 세션 인증 | O |
| BCrypt 비밀번호 암호화 | O |
| CORS 제어 | O |
| 역할 기반 접근 제어 | O |

### 10.3 테스트 결과

| 카테고리 | 테스트 수 | PASS | FAIL |
|----------|:--------:|:----:|:----:|
| 기능 테스트 | 177 | 177 | 0 |
| 통합 테스트 | 40 | 40 | 0 |
| **합계** | **217** | **217** | **0** |

---

## 11. 유스케이스 구현 현황

| UC ID | 유스케이스명 | 액터 | 구현 상태 |
|-------|-------------|------|:---------:|
| UC-01 | 회원가입 | 비회원 | 완료 |
| UC-02 | 로그인 | 회원 | 완료 |
| UC-03 | 일기 작성 | User | 완료 |
| UC-04 | 감정 분석 | AI Server | 완료 |
| UC-05 | 챗봇 상담 | User | 완료 |
| UC-06 | 음악 추천 | User | 완료 |
| UC-07 | 대시보드 조회 | Doctor | 완료 |
| UC-08 | 환자 통계 조회 | Doctor | 완료 |
| UC-09 | 환자 배정 | Doctor | 완료 |

---

## 12. 에러 처리 및 장애 대응

### 12.1 에러 코드 체계

| 코드 | 메시지 | 처리 방법 |
|------|--------|----------|
| E001 | 인증 실패 | 로그인 페이지 리다이렉트 |
| E002 | 권한 없음 | 403 Forbidden 응답 |
| E003 | 데이터 없음 | 404 Not Found 응답 |
| E004 | AI 서버 연결 실패 | 기본 응답 제공 |
| E005 | 파일 업로드 실패 | 에러 메시지 표시 |

### 12.2 AI 분석 실패 대응 전략

```
1. FastAPI 서버 연결 실패
   -> 일기는 정상 저장
   -> 분석 결과 "분석 대기중" 상태로 저장
   -> 재시도 로직 실행 (최대 3회)

2. 분석 결과 파싱 실패
   -> 기본값 적용 (neutrality: 100%, 나머지: 0%)
   -> 로그 기록
```

---

## 13. 비즈니스 규칙 요약

### 13.1 일기 관련

| 규칙 ID | 내용 |
|---------|------|
| BR-D01 | 일기는 본인만 조회/수정/삭제 가능 (의사는 배정 환자 열람 가능) |
| BR-D02 | 첨부파일은 최대 3개까지 허용 |
| BR-D03 | 일기 삭제 시 관련 분석 결과도 함께 삭제 |

### 13.2 분석 관련

| 규칙 ID | 내용 |
|---------|------|
| BR-A01 | 일기 1개당 분석 결과 1개 (1:1 관계) |
| BR-A02 | 우울증 위험도 30% 이상 시 전문 상담 안내 |
| BR-A03 | 분석 실패 시 기본값(중립 100%) 적용 |

### 13.3 배정 관련

| 규칙 ID | 내용 |
|---------|------|
| BR-R01 | 의사만 환자 배정 가능 |
| BR-R02 | 배정된 환자의 일기/분석만 열람 가능 |
| BR-R03 | 환자는 1명의 의사에게만 배정 가능 |

---

## 14. 기대 효과

| 효과 | 설명 |
|------|------|
| **자기 인식 향상** | 일기 작성을 통한 자신의 감정 패턴 인식 및 이해 증진 |
| **심리 문제 조기 발견** | 우울증 위험도 분석을 통한 심리 문제 조기 감지 및 개입 |
| **심리 지원 접근성 향상** | 24시간 AI 챗봇으로 시간/비용 제약 없이 언제든 심리 지원 가능 |
| **데이터 기반 전문 상담** | 의사가 환자의 장기 감정 추이 데이터를 활용하여 보다 정확한 상담 가능 |
| **치유 콘텐츠 연계** | 감정 상태에 맞는 음악 추천으로 일상 속 자연스러운 감정 케어 |

---

## 15. 결론 및 향후 계획

### 15.1 프로젝트 성과

DODAK 프로젝트는 계획된 모든 핵심 기능을 성공적으로 구현하였습니다.

- **9개 유스케이스** 전체 구현 완료
- **Spring Boot 3.5.7 + FastAPI + MySQL 8.0** 3-Tier 아키텍처 안정적 구축
- **KoBERT/KoGPT2 기반 AI 감정 분석** 및 챗봇 상담 시스템 운영
- **9가지 감정 분류 + 우울증 위험도 예측** 알고리즘 구현
- **의사 대시보드**: 환자 감정 추이 시각화 및 중증 환자 모니터링 기능
- **YouTube 음악 추천**: 감정 맞춤형 치유 콘텐츠 자동 연계
- **Spring Security 기반 보안**: 역할별 접근 제어, BCrypt 암호화
- **성능 목표 7/7 달성** (100%), **테스트 217건 전체 PASS**

### 15.2 차별화 포인트

1. **AI 기반 자동 감정 분석**: 일기 저장과 동시에 9가지 감정을 자동 분류하여 사용자의 자기 인식을 지원
2. **듀얼 챗봇 시스템**: 가벼운 대화(KoGPT2)와 심층 상담(KoBERT)을 분리하여 상황에 맞는 지원 제공
3. **우울증 조기 감지**: 고위험 키워드 감지 시 자동으로 전문 상담 연결을 안내하여 조기 개입 유도
4. **의사-환자 연동**: 의사가 담당 환자의 감정 추이를 대시보드로 모니터링하고, 중증 환자를 집중 관리

### 15.3 향후 개선 방향

| 영역 | 개선 사항 |
|------|----------|
| AI 모델 | KoBERT 미세 조정(Fine-tuning)으로 감정 분류 정확도 향상 |
| 모바일 | 모바일 반응형 디자인 최적화 또는 네이티브 앱 개발 |
| 알림 | 우울증 위험도 높은 경우 의사에게 자동 알림 기능 추가 |
| 데이터 | 장기 감정 추이 기반 개인화 리포트 자동 생성 |
| 보안 | 일기 내용 AES 암호화 저장 옵션 추가 |
| 확장 | OAuth2 소셜 로그인 지원 (카카오, 네이버) |

---

## 부록 A: 화면 캡처 목록

| 번호 | 파일명 | 설명 |
|------|--------|------|
| 1 | public_01_index.png | 메인 랜딩 페이지 |
| 2 | public_02_login.png | 로그인 페이지 |
| 3 | public_03_signup.png | 회원가입 페이지 |
| 4 | member_01_home.png | 회원 메인 (마스코트 소개) |
| 5 | member_02_diary_write.png | 일기 작성 페이지 |
| 6 | member_03_diary_list.png | 일기 목록 페이지 |
| 7 | member_04_mypage.png | 회원 마이페이지 |
| 8 | doctor_01_home.png | 의사 메인 (마스코트 소개) |
| 9 | doctor_02_dashboard.png | 의사 대시보드 |
| 10 | doctor_03_patient_stats.png | 환자 통계 페이지 |
| 11 | doctor_04_patient_diary_list.png | 환자 일기 목록 |
| 12 | doctor_05_mypage.png | 의사 마이페이지 |

---

## 부록 B: 프로젝트 문서 목록

| # | 문서 | 설명 |
|---|------|------|
| 1 | [REQUIREMENTS.md](./REQUIREMENTS.md) | 시스템 요구사항 정의서 |
| 2 | [FUNCTIONAL_SPECIFICATION.md](./FUNCTIONAL_SPECIFICATION.md) | 기능 명세서 |
| 3 | [API_SPECIFICATION.md](./API_SPECIFICATION.md) | API 명세서 |
| 4 | [TECH_STACK.md](./TECH_STACK.md) | 기술 스택 |
| 5 | [USE_CASES.md](./USE_CASES.md) | 유스케이스 명세서 |
| 6 | [SCREEN_DESIGN.md](./SCREEN_DESIGN.md) | 화면 설계서 |
| 7 | [TEST_CASES.md](./TEST_CASES.md) | 테스트 케이스 (177개) |
| 8 | [INTEGRATION_TEST_CASES.md](./INTEGRATION_TEST_CASES.md) | 통합 테스트 (40개) |
| 9 | [PERFORMANCE_TEST_REPORT.md](./PERFORMANCE_TEST_REPORT.md) | 성능 테스트 보고서 |
| 10 | [DEMO_SCRIPT.md](./DEMO_SCRIPT.md) | 시연 대본 |
| 11 | [PRESENTATION.md](./PRESENTATION.md) | 발표 자료 |
| 12 | [FINAL_REPORT.md](./FINAL_REPORT.md) | 최종 결과 보고서 (본 문서) |
| 13 | [presentation.html](./presentation.html) | HTML 프레젠테이션 |

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|-----------|--------|
| 1.0 | 2026-02-09 | 최초 작성 | 서유나 |
| 1.1 | 2026-02-09 | 기능 상세 및 스크린샷 추가, AI 분석 시스템 세부 설명 보강 | 서유나 |
| 1.2 | 2026-02-09 | DOT-Project 형식 적용, 9가지 감정 체계 반영, API 설계 30+ 엔드포인트 상세화, 성능/테스트 결과 최신화 | 서유나 |

---

> **DODAK** - 도닥도닥, 당신의 마음을 어루만져 드려요.
